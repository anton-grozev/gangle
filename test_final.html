<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <title>–û–ö–û–ù–ß–ê–¢–ï–õ–ï–ù –¢–ï–°–¢ - –ò–º–∏—Ç–∞—Ü–∏—è –Ω–∞ –∂–∏–≤–∞—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞</title>
    <script src="GAngle.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 40px auto;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .panel {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            padding: 30px;
            border-radius: 15px;
            margin: 25px 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            font-size: 36px;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        h2 {
            color: #667eea;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        .input-item {
            font-family: 'Courier New', monospace;
            font-size: 18px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #667eea;
        }
        .result-mega {
            text-align: center;
            padding: 40px;
            margin: 30px 0;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        }
        .result-mega .value {
            font-size: 72px;
            font-weight: bold;
            color: white;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            margin: 20px 0;
        }
        .result-mega .label {
            font-size: 24px;
            color: rgba(255,255,255,0.9);
            margin-bottom: 10px;
        }
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.8;
            margin: 20px 0;
            overflow-x: auto;
        }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }
        .method-box {
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .method-wrong {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        .method-correct {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }
        .method-box h3 {
            margin-top: 0;
            font-size: 24px;
        }
        .method-box .alpha {
            font-size: 48px;
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        .conclusion {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            padding: 40px;
            border-radius: 15px;
            margin: 40px 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        .conclusion h2 {
            color: #333;
            font-size: 32px;
            margin-top: 0;
        }
        .conclusion p {
            font-size: 20px;
            line-height: 1.8;
            color: #333;
        }
        .highlight {
            background: rgba(255,255,255,0.3);
            padding: 5px 15px;
            border-radius: 8px;
            font-weight: bold;
            display: inline-block;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>üéØ –û–ö–û–ù–ß–ê–¢–ï–õ–ï–ù –¢–ï–°–¢<br>–¢–æ—á–Ω–æ –∫–∞—Ç–æ –Ω–∞ –∂–∏–≤–∞—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h1>
    
    <div class="panel">
        <h2>üì• –í—Ö–æ–¥–Ω–∏ –¥–∞–Ω–Ω–∏ (–æ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏—è –∫–∞–ª–∫—É–ª–∞—Ç–æ—Ä)</h2>
        <div class="input-grid" id="inputs"></div>
    </div>

    <div class="panel">
        <h2>üî¨ –ö–∞–∫–≤–æ –ø—Ä–∞–≤–∏ –∫–æ–¥—ä—Ç –Ω–∞ –ñ–ò–í–ê–¢–ê —Å—Ç—Ä–∞–Ω–∏—Ü–∞?</h2>
        <div class="code-block" id="live-code"></div>
    </div>

    <div class="comparison">
        <div class="method-box method-wrong">
            <h3>‚ùå –ë–ï–ó wrapper</h3>
            <p>calculateAngle()</p>
            <div id="without-wrapper"></div>
        </div>
        <div class="method-box method-correct">
            <h3>‚úÖ –° wrapper</h3>
            <p>calculateAngleFromSW()</p>
            <div id="with-wrapper"></div>
        </div>
    </div>

    <div class="result-mega">
        <div class="label">üéØ –†–ï–ó–£–õ–¢–ê–¢ –û–¢ –ñ–ò–í–ê–¢–ê –°–¢–†–ê–ù–ò–¶–ê</div>
        <div class="value" id="live-result"></div>
        <div id="live-details" style="font-size: 20px; margin-top: 20px;"></div>
    </div>

    <div class="conclusion" id="conclusion"></div>

    <script>
        // –¢–û–ß–ù–û –°–™–©–ò–¢–ï –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∫–∞—Ç–æ –Ω–∞ –∂–∏–≤–∞—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞
        const l = 85;
        const d = 5.7;
        const thetaDeg = 61;
        const betaDeg = 24;
        const x = 0;
        const y = 4.84;
        const z = -9.75;

        const calc = window.DrillAngleCalculator;
        const theta = calc.deg2rad(thetaDeg);
        const beta = calc.deg2rad(betaDeg);

        console.log('===== –û–ö–û–ù–ß–ê–¢–ï–õ–ï–ù –¢–ï–°–¢ =====');
        console.log('–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:');
        console.log('l =', l, 'mm');
        console.log('d =', d, 'mm');
        console.log('Œ∏ =', thetaDeg, '¬∞ =', theta, 'rad');
        console.log('Œ≤ =', betaDeg, '¬∞ =', beta, 'rad');
        console.log('–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏: x =', x, ', y =', y, ', z =', z);

        // –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –≤—Ö–æ–¥–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏
        document.getElementById('inputs').innerHTML = `
            <div class="input-item"><strong>l</strong> = ${l} mm</div>
            <div class="input-item"><strong>d</strong> = ${d} mm</div>
            <div class="input-item"><strong>Œ∏</strong> = ${thetaDeg}¬∞ (${theta.toFixed(8)} rad)</div>
            <div class="input-item"><strong>Œ≤</strong> = ${betaDeg}¬∞ (${beta.toFixed(8)} rad)</div>
            <div class="input-item"><strong>x</strong> = ${x} mm</div>
            <div class="input-item"><strong>y</strong> = ${y} mm</div>
            <div class="input-item"><strong>z</strong> = ${z} mm</div>
        `;

        // –ü–æ–∫–∞–∑–≤–∞–Ω–µ –∫–∞–∫–≤–æ –ø—Ä–∞–≤–∏ –∂–∏–≤–∞—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (—Ä–µ–¥–æ–≤–µ 2760-2765 –æ—Ç index.html)
        document.getElementById('live-code').innerHTML = `
<span style="color: #9cdcfe;">const</span> <span style="color: #4fc1ff;">calc</span> = <span style="color: #4ec9b0;">window</span>.<span style="color: #dcdcaa;">DrillAngleCalculator</span>;
<span style="color: #9cdcfe;">const</span> <span style="color: #4fc1ff;">thetaRad</span> = <span style="color: #4fc1ff;">calc</span>.<span style="color: #dcdcaa;">deg2rad</span>(<span style="color: #b5cea8;">${thetaDeg}</span>);
<span style="color: #9cdcfe;">const</span> <span style="color: #4fc1ff;">betaRad</span> = <span style="color: #4fc1ff;">calc</span>.<span style="color: #dcdcaa;">deg2rad</span>(<span style="color: #b5cea8;">${betaDeg}</span>);
<span style="color: #9cdcfe;">const</span> <span style="color: #4fc1ff;">x_sw</span> = <span style="color: #b5cea8;">${x}</span>, <span style="color: #4fc1ff;">y_sw</span> = <span style="color: #b5cea8;">${y}</span>, <span style="color: #4fc1ff;">z_sw</span> = <span style="color: #b5cea8;">${z}</span>;

<span style="color: #c586c0;">let</span> <span style="color: #4fc1ff;">res</span>;
<span style="color: #c586c0;">if</span> (<span style="color: #c586c0;">typeof</span> <span style="color: #4fc1ff;">calc</span>.<span style="color: #dcdcaa;">calculateAngleFromSW</span> === <span style="color: #ce9178;">'function'</span>) {
    <span style="color: #6a9955;">// ‚úÖ Wrapper —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ –°–™–©–ï–°–¢–í–£–í–ê - –∏–∑–ø–æ–ª–∑–≤–∞ —Å–µ —Ç—è!</span>
    <span style="color: #4fc1ff;">res</span> = <span style="color: #4fc1ff;">calc</span>.<span style="color: #dcdcaa;">calculateAngleFromSW</span>(<span style="color: #4fc1ff;">l</span>, <span style="color: #4fc1ff;">d</span>, <span style="color: #4fc1ff;">thetaRad</span>, <span style="color: #4fc1ff;">betaRad</span>, <span style="color: #4fc1ff;">x_sw</span>, <span style="color: #4fc1ff;">y_sw</span>, <span style="color: #4fc1ff;">z_sw</span>);
} <span style="color: #c586c0;">else</span> {
    <span style="color: #6a9955;">// ‚ùå Wrapper —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ –ù–ï —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ - fallback –∫—ä–º –¥–∏—Ä–µ–∫—Ç–Ω–æ</span>
    <span style="color: #4fc1ff;">res</span> = <span style="color: #4fc1ff;">calc</span>.<span style="color: #dcdcaa;">calculateAngle</span>(<span style="color: #4fc1ff;">l</span>, <span style="color: #4fc1ff;">d</span>, <span style="color: #4fc1ff;">thetaRad</span>, <span style="color: #4fc1ff;">betaRad</span>, <span style="color: #4fc1ff;">x_sw</span>, <span style="color: #4fc1ff;">y_sw</span>, <span style="color: #4fc1ff;">z_sw</span>);
}
        `;

        // –ú–µ—Ç–æ–¥ 1: –ë–ï–ó wrapper
        console.log('\n----- –ë–ï–ó WRAPPER -----');
        const result1 = calc.calculateAngle(l, d, theta, beta, x, y, z);
        console.log('–†–µ–∑—É–ª—Ç–∞—Ç –ë–ï–ó wrapper:', result1);

        document.getElementById('without-wrapper').innerHTML = `
            <div class="alpha">${result1.alphaRAD.toFixed(4)}¬∞</div>
            <div>h = ${result1.h.toFixed(4)} mm</div>
            <div>x<sub>M</sub> = ${result1.xM.toFixed(4)} mm</div>
        `;

        // –ú–µ—Ç–æ–¥ 2: –° wrapper
        console.log('\n----- –° WRAPPER -----');
        let result2;
        if (typeof calc.calculateAngleFromSW === 'function') {
            result2 = calc.calculateAngleFromSW(l, d, theta, beta, x, y, z);
            console.log('–†–µ–∑—É–ª—Ç–∞—Ç –° wrapper:', result2);
            
            document.getElementById('with-wrapper').innerHTML = `
                <div class="alpha">${result2.alphaRAD.toFixed(4)}¬∞</div>
                <div>h = ${result2.h.toFixed(4)} mm</div>
                <div>x<sub>M</sub> = ${result2.xM.toFixed(4)} mm</div>
            `;
        } else {
            console.log('‚ùå calculateAngleFromSW –ù–ï —Å—ä—â–µ—Å—Ç–≤—É–≤–∞!');
            document.getElementById('with-wrapper').innerHTML = `
                <div style="color: #fff;">‚ùå –§—É–Ω–∫—Ü–∏—è—Ç–∞ –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞!</div>
            `;
        }

        // –ö–∞–∫–≤–æ –∏–∑–ø–æ–ª–∑–≤–∞ –ñ–ò–í–ê–¢–ê —Å—Ç—Ä–∞–Ω–∏—Ü–∞?
        console.log('\n----- –ñ–ò–í–ê–¢–ê –°–¢–†–ê–ù–ò–¶–ê -----');
        let liveResult;
        if (typeof calc.calculateAngleFromSW === 'function') {
            console.log('‚úÖ calculateAngleFromSW –°–™–©–ï–°–¢–í–£–í–ê - —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞ —è –∏–∑–ø–æ–ª–∑–≤–∞!');
            liveResult = calc.calculateAngleFromSW(l, d, theta, beta, x, y, z);
        } else {
            console.log('‚ùå calculateAngleFromSW –ù–ï —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ - –∏–∑–ø–æ–ª–∑–≤–∞ —Å–µ calculateAngle');
            liveResult = calc.calculateAngle(l, d, theta, beta, x, y, z);
        }
        console.log('–†–µ–∑—É–ª—Ç–∞—Ç –æ—Ç –∂–∏–≤–∞—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞:', liveResult);

        document.getElementById('live-result').textContent = liveResult.alphaRAD.toFixed(4) + '¬∞';
        document.getElementById('live-details').innerHTML = `
            h = ${liveResult.h.toFixed(4)} mm &nbsp;|&nbsp; x<sub>M</sub> = ${liveResult.xM.toFixed(4)} mm
        `;

        // –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
        const expectedAlpha = 15.98;
        const diff1 = Math.abs(result1.alphaRAD - expectedAlpha);
        const diff2 = result2 ? Math.abs(result2.alphaRAD - expectedAlpha) : Infinity;
        const diffLive = Math.abs(liveResult.alphaRAD - expectedAlpha);

        console.log('\n===== –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï =====');
        console.log('–û—á–∞–∫–≤–∞–Ω —Ä–µ–∑—É–ª—Ç–∞—Ç:', expectedAlpha, '¬∞');
        console.log('–ë–ï–ó wrapper:', result1.alphaRAD.toFixed(4), '¬∞ | –†–∞–∑–ª–∏–∫–∞:', diff1.toFixed(4), '¬∞');
        if (result2) {
            console.log('–° wrapper:', result2.alphaRAD.toFixed(4), '¬∞ | –†–∞–∑–ª–∏–∫–∞:', diff2.toFixed(4), '¬∞');
        }
        console.log('–ñ–ò–í–ê–¢–ê —Å—Ç—Ä–∞–Ω–∏—Ü–∞:', liveResult.alphaRAD.toFixed(4), '¬∞ | –†–∞–∑–ª–∏–∫–∞:', diffLive.toFixed(4), '¬∞');

        let conclusionHTML = `
            <h2>üéØ –û–ö–û–ù–ß–ê–¢–ï–õ–ï–ù –û–¢–ì–û–í–û–†</h2>
            <p style="font-size: 24px; margin: 20px 0;">
                <strong>–û—á–∞–∫–≤–∞–Ω —Ä–µ–∑—É–ª—Ç–∞—Ç: ${expectedAlpha}¬∞</strong>
            </p>
        `;

        if (diffLive < 0.01) {
            conclusionHTML += `
                <p style="font-size: 22px;">
                    ‚úÖ –ñ–∏–≤–∞—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–∞–≤–∞ —Ç–æ—á–Ω–æ <span class="highlight">${liveResult.alphaRAD.toFixed(4)}¬∞</span> 
                    (—Ä–∞–∑–ª–∏–∫–∞: ${diffLive.toFixed(4)}¬∞)
                </p>
            `;
        }

        if (typeof calc.calculateAngleFromSW === 'function') {
            if (diff2 < diff1) {
                conclusionHTML += `
                    <div style="background: rgba(76, 175, 80, 0.3); padding: 25px; border-radius: 10px; margin: 25px 0;">
                        <p style="font-size: 26px; margin: 0;">
                            ‚úÖ <strong>Wrapper —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ –ï –ù–ï–û–ë–•–û–î–ò–ú–ê!</strong>
                        </p>
                        <p style="margin-top: 15px;">
                            <strong>–° wrapper:</strong> ${result2.alphaRAD.toFixed(4)}¬∞ (—Ä–∞–∑–ª–∏–∫–∞: ${diff2.toFixed(4)}¬∞)<br>
                            <strong>–ë–ï–ó wrapper:</strong> ${result1.alphaRAD.toFixed(4)}¬∞ (—Ä–∞–∑–ª–∏–∫–∞: ${diff1.toFixed(4)}¬∞)
                        </p>
                        <p style="margin-top: 20px; font-size: 20px;">
                            üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏—Ç–µ (${x}, ${y}, ${z}) –°–ê –≤ SW —Å–∏—Å—Ç–µ–º–∞<br>
                            üîÑ –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è—Ç–∞ SW ‚Üí M –µ –ó–ê–î–™–õ–ñ–ò–¢–ï–õ–ù–ê<br>
                            ‚úÖ –ñ–∏–≤–∞—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ò–ó–ü–û–õ–ó–í–ê wrapper-–∞ –ø—Ä–∞–≤–∏–ª–Ω–æ
                        </p>
                    </div>
                `;
            } else {
                conclusionHTML += `
                    <div style="background: rgba(255, 152, 0, 0.3); padding: 25px; border-radius: 10px; margin: 25px 0;">
                        <p style="font-size: 26px; margin: 0;">
                            ‚ö†Ô∏è <strong>Wrapper —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ –ù–ï –ï –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞!</strong>
                        </p>
                        <p style="margin-top: 15px;">
                            <strong>–ë–ï–ó wrapper:</strong> ${result1.alphaRAD.toFixed(4)}¬∞ (—Ä–∞–∑–ª–∏–∫–∞: ${diff1.toFixed(4)}¬∞)<br>
                            <strong>–° wrapper:</strong> ${result2.alphaRAD.toFixed(4)}¬∞ (—Ä–∞–∑–ª–∏–∫–∞: ${diff2.toFixed(4)}¬∞)
                        </p>
                        <p style="margin-top: 20px; font-size: 20px;">
                            üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏—Ç–µ (${x}, ${y}, ${z}) –≤–µ—Ä–æ—è—Ç–Ω–æ –≤–µ—á–µ –°–ê –≤ M —Å–∏—Å—Ç–µ–º–∞<br>
                            ‚ùå Label-—ä—Ç "SW –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏" –µ –ì–†–ï–®–ï–ù<br>
                            üîß –¢—Ä—è–±–≤–∞ –∏–ª–∏ –¥–∞ —Å–µ –º–∞—Ö–Ω–µ wrapper-–∞, –∏–ª–∏ –¥–∞ —Å–µ –ø—Ä–æ–º–µ–Ω–∏ label-–∞
                        </p>
                    </div>
                `;
            }
        } else {
            conclusionHTML += `
                <div style="background: rgba(244, 67, 54, 0.3); padding: 25px; border-radius: 10px; margin: 25px 0;">
                    <p style="font-size: 24px;">
                        ‚ùå calculateAngleFromSW —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ <strong>–ù–ï –°–™–©–ï–°–¢–í–£–í–ê</strong> –≤ –ª–æ–∫–∞–ª–Ω–∏—è GAngle.js!
                    </p>
                    <p style="margin-top: 15px;">
                        –ñ–∏–≤–∞—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–∑–ø–æ–ª–∑–≤–∞: ${liveResult.alphaRAD.toFixed(4)}¬∞<br>
                        –õ–æ–∫–∞–ª–Ω–æ –±–µ–∑ wrapper: ${result1.alphaRAD.toFixed(4)}¬∞
                    </p>
                </div>
            `;
        }

        document.getElementById('conclusion').innerHTML = conclusionHTML;
    </script>
</body>
</html>
